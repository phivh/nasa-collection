(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{202:function(e,t,a){"use strict";function n(){return function(e,t){var a=JSON.parse(localStorage.getItem("data"));a||(a=[]),e(function(e){return{type:"FETCHED_LOCAL",data:e}}(a))}}a.d(t,"a",function(){return n})},204:function(e,t,a){"use strict";function n(e,t){return e===t}a.d(t,"a",function(){return r});var r=function(e){for(var t=arguments.length,a=Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];return function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=0,o=n.pop(),l=function(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(e){return"function"==typeof e})){var a=t.map(function(e){return typeof e}).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+a+"]")}return t}(n),s=e.apply(void 0,[function(){return i++,o.apply(null,arguments)}].concat(a)),c=e(function(){for(var e=[],t=l.length,a=0;a<t;a++)e.push(l[a].apply(null,arguments));return s.apply(null,e)});return c.resultFunc=o,c.dependencies=l,c.recomputations=function(){return i},c.resetRecomputations=function(){return i=0},c}}(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n,a=null,r=null;return function(){return function(e,t,a){if(null===t||null===a||t.length!==a.length)return!1;for(var n=t.length,r=0;r<n;r++)if(!e(t[r],a[r]))return!1;return!0}(t,a,arguments)||(r=e.apply(null,arguments)),a=arguments,r}})},213:function(e,t,a){"use strict";a.r(t);var n=a(9),r=a(12),i=a(0),o=a.n(i),l=a(1),s=a.n(l),c=a(72),u=a(73),d=a(74);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}c.a.library.add({faCheck:d.a,faChevronDown:d.b,faTimes:d.g});var b=function(e){function t(e){var a,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(a=!(r=f(t).call(this,e))||"object"!==p(r)&&"function"!=typeof r?m(n):r).state={data:JSON.parse(localStorage.getItem("data"))?JSON.parse(localStorage.getItem("data")):[],id:a.props.selectedItem.data.nasa_id,title:a.props.selectedItem.data.title,location:a.props.selectedItem.data.location?a.props.selectedItem.data.location:"",date:a.props.selectedItem.data.date_created,description:a.props.selectedItem.data.description,media_type:a.props.selectedItem.data.media_type,favorite:!!a.props.selectedItem.favorite&&a.props.selectedItem.favorite,thumb:a.props.selectedItem.thumb,fileUrl:a.props.selectedItem.fileUrl?a.props.selectedItem.fileUrl:""},a.handleSubmit=a.handleSubmit.bind(m(a)),a.handleChange=a.handleChange.bind(m(a)),a.handleClose=a.handleClose.bind(m(a)),a}var a,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,i["Component"]),a=t,(n=[{key:"handleSubmit",value:function(e){var t=this;if(e.preventDefault(),this.state.data.some(function(e){return e.data.nasa_id===t.state.id})&&this.props.location.pathname.indexOf("edit")>-1){var a=this.state.data.map(function(e){return e.data.nasa_id===t.state.id&&(e={data:{nasa_id:t.state.id,title:t.state.title,location:t.state.location,date_created:t.state.date,description:t.state.description,media_type:t.state.media_type},favorite:t.state.favorite,thumb:t.state.thumb,fileUrl:t.state.fileUrl}),e});localStorage.setItem("data",JSON.stringify(a))}else{var n={data:{nasa_id:this.state.id,title:this.state.title,location:this.state.location,date_created:this.state.date,description:this.state.description,media_type:this.state.media_type},favorite:this.state.favorite,thumb:this.state.thumb,fileUrl:this.state.fileUrl?this.state.fileUrl:this.state.thumb};!this.state.data.some(function(e){return e.data.nasa_id===t.state.id})&&this.props.location.pathname.indexOf("add")>-1&&this.state.data.push(n),localStorage.setItem("data",JSON.stringify(this.state.data))}this.props.history.push("/"),this.props.refesh()}},{key:"handleChange",value:function(e){var t,a,n;this.setState((t={},a=e.target.name,n=e.target.value,a in t?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n,t))}},{key:"handleClose",value:function(){this.props.history.goBack()}},{key:"componentDidMount",value:function(){var e=this;this.props.selectedItem.file&&fetch(this.props.selectedItem.file).then(function(e){return e.json()}).then(function(t){var a=t.find(function(e){return e.indexOf("mp4")>-1});e.setState({fileUrl:a})}).catch(function(e){console.error(e)})}},{key:"render",value:function(){var e=this.state.fileUrl&&this.state.fileUrl.length>0?this.state.fileUrl:this.props.selectedItem.thumb;return o.a.createElement("div",{className:"modal"},o.a.createElement("div",{className:"modal__container"},o.a.createElement("div",{className:"modal__content"},o.a.createElement("h2",null,this.props.location.pathname.indexOf("add")>-1&&"Add to collection",this.props.location.pathname.indexOf("edit")>-1&&"Edit",o.a.createElement("button",{onClick:this.handleClose},o.a.createElement(u.a,{icon:"times",size:"lg"}))),o.a.createElement("form",{onSubmit:this.handleSubmit,ref:"form"},o.a.createElement("div",{className:"para-item"},o.a.createElement("label",{htmlFor:"title"},"Title"),o.a.createElement("input",{type:"text",value:this.state.title,onChange:this.handleChange,name:"title",id:"title"})),o.a.createElement("div",{className:"para-item"},o.a.createElement("label",{htmlFor:"desc"},"Description"),o.a.createElement("textarea",{value:this.state.description,name:"description",onChange:this.handleChange,id:"desc"})),o.a.createElement("div",{className:"para-item select"},o.a.createElement("label",{htmlFor:"type"},"Type"),o.a.createElement("select",{name:"type",id:"media_type",onChange:this.handleChange},o.a.createElement("option",{value:this.state.media_type},this.state.media_type)),o.a.createElement(u.a,{icon:"chevron-down",size:"lg"})),o.a.createElement("div",{className:"para-item"},o.a.createElement("label",{htmlFor:"type"},"Link preview image url",o.a.createElement("i",null,"*")),o.a.createElement("input",{name:"thumb",type:"text",value:this.state.thumb,onChange:this.handleChange,id:"thumbUrl"})),o.a.createElement("div",{className:"para-item"},o.a.createElement("label",{htmlFor:"type"},"Link file url",o.a.createElement("i",null,"*")),o.a.createElement("input",{name:"file",type:"text",value:e,onChange:this.handleChange,id:"thumbUrl"})),o.a.createElement("button",{className:"button-checked"},o.a.createElement(u.a,{icon:"check",size:"lg"})," ",this.props.location.pathname.indexOf("add")>-1&&"Add to collection",this.props.location.pathname.indexOf("edit")>-1&&"Update Colection")))),o.a.createElement("div",{className:"modal__overlay"}))}}])&&h(a.prototype,n),r&&h(a,r),t}();b.propTypes={selectedItem:s.a.object,refesh:s.a.func,location:s.a.object};var v=b,g=a(204),E=a(202);var _=Object(g.a)([function(e,t){return e.find(function(e,a){return e.data.nasa_id===t.match.params.id})}],function(e,t){return e});t.default=Object(r.e)(Object(n.c)(function(e,t){var a;return a=t.location.pathname.indexOf("add")>-1?e.data:e.local,{selectedItem:_(a,t),history:t.history,location:t.location}},function(e,t){return{refesh:function(){e(Object(E.a)())}}})(v))}}]);
//# sourceMappingURL=5.bundle.js.map